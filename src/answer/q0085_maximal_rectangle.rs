// q0085_maximal_rectangle

struct Solution;

impl Solution {
    pub fn maximal_rectangle(matrix: Vec<Vec<char>>) -> i32 {
        let x2 = matrix.len() as isize;
        if x2 == 0 {
            return 0;
        }
        let y2 = matrix[0].len() as isize;
        Solution::max_in((0, 0, x2, y2), &matrix) as i32
    }

    pub fn max_in((x1, y1, x2, y2): (isize, isize, isize, isize), area: &Vec<Vec<char>>) -> isize {
        if y1 >= y2 || x1 >= x2 {
            return 0;
        }
        for i in x1..x2 {
            for j in y1..y2 {
                if area[i as usize][j as usize] == '0' {
                    let a1 = Solution::max_in((x1, y1, i, y2), area);
                    let a2 = Solution::max_in((i + 1, y1, x2, y2), area);
                    let a3 = Solution::max_in((x1, y1, x2, j), area);
                    let a4 = Solution::max_in((x1, j + 1, x2, y2), area);
                    return a1.max(a2).max(a3).max(a4);
                }
            }
        }
        return (x2 - x1) * (y2 - y1);
    }
}

#[cfg(test)]
mod tests {
    use super::Solution;

    #[test]
    fn it_works() {
        assert_eq!(
            6,
            Solution::maximal_rectangle(vec![
                vec!['1', '0', '1', '0', '0'],
                vec!['1', '0', '1', '1', '1'],
                vec!['1', '1', '1', '1', '1'],
                vec!['1', '0', '0', '1', '0']
            ])
        );

        assert_eq!(1, Solution::maximal_rectangle(vec![vec!['1']]));

        assert_eq!(0, Solution::maximal_rectangle(vec![vec!['0']]));

        assert_eq!(0, Solution::maximal_rectangle(Vec::<Vec<char>>::new()));
        assert_eq!(
            114,
            Solution::maximal_rectangle(vec![
                vec![
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1',
                    '0', '0', '1', '1', '1', '1', '1', '1', '1', '1', '0', '0', '1', '1', '1', '0',
                    '1', '1', '1', '1', '1', '1', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '0', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '0', '1', '1', '0', '1', '1', '1', '1', '1', '0', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1'
                ],
                vec![
                    '0', '1', '1', '1', '1', '0', '1', '0', '1', '1', '1', '1', '1', '1', '0', '1',
                    '1', '0', '1', '1', '0', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1'
                ],
                vec![
                    '0', '1', '0', '1', '1', '0', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '0', '1', '0', '1',
                    '1', '0', '1', '1', '1', '1', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1', '1', '1',
                    '1', '1', '0', '1', '1', '0', '0', '1', '0', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1', '1', '0', '1', '0', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1', '0', '1', '1', '1',
                    '1', '1', '1', '0', '1', '1', '1', '1'
                ],
                vec![
                    '0', '1', '1', '0', '1', '1', '0', '1', '0', '1', '1', '1', '0', '0', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1',
                    '1', '1', '1', '1', '0', '1', '0', '1'
                ],
                vec![
                    '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '0',
                    '1', '1', '1', '1', '1', '1', '1', '0', '0', '1', '1', '0', '0', '1', '1', '0',
                    '1', '1', '0', '1', '0', '1', '0', '1'
                ],
                vec![
                    '1', '1', '1', '1', '0', '1', '1', '1', '1', '0', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '0', '1', '1', '0', '1', '1', '0', '1', '1', '1', '1', '0', '1',
                    '0', '1', '1', '0', '1', '0', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '0', '1', '1', '0', '1', '1', '0', '1', '1', '1', '0', '1',
                    '1', '1', '1', '0', '1', '1', '1', '1'
                ],
                vec![
                    '1', '1', '1', '0', '1', '1', '0', '0', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '0', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1'
                ],
                vec![
                    '1', '0', '1', '1', '1', '1', '1', '1', '1', '0', '1', '1', '1', '1', '0', '1',
                    '1', '1', '1', '0', '0', '1', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1'
                ],
                vec![
                    '0', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '0', '1', '1', '1', '1', '1', '1', '0', '1', '1', '1', '0', '1', '1', '1',
                    '1', '1', '0', '1', '1', '1', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1',
                    '1', '1', '1', '1', '1', '0', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '0', '0', '1', '1', '1', '1', '1', '1', '1', '1', '0',
                    '1', '0', '1', '1', '0', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '0', '1', '1', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0',
                    '1', '1', '1', '1', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '0', '1', '1', '1', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '1', '0', '1', '1', '0', '0', '1', '1', '1', '1', '1',
                    '1', '0', '0', '1', '1', '1', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1',
                    '1', '1', '1', '1', '0', '1', '1', '1'
                ],
                vec![
                    '1', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '0', '1', '0', '1', '1', '1', '1', '1', '0', '0', '1', '0', '1', '1', '1', '1',
                    '1', '0', '1', '1', '1', '1', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '1', '0', '0', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '0', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '0', '1', '1', '1', '0', '1', '1', '1', '1', '1', '0', '1', '1', '1',
                    '1', '1', '0', '1', '1', '0', '1', '1'
                ],
                vec![
                    '1', '1', '0', '0', '0', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '1', '0', '1', '1', '1', '1', '1', '0', '1', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '0', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '0', '1', '1', '0', '0', '1', '0', '1', '1', '1', '0', '0',
                    '1', '1', '1', '1', '1', '1', '1', '1'
                ],
                vec![
                    '1', '1', '1', '0', '0', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '0', '1', '1', '0', '1', '1', '1', '1', '0', '1', '1', '1', '1',
                    '0', '1', '1', '1', '1', '1', '0', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1',
                    '1', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '1', '1', '0', '1', '1', '1', '1', '1', '1', '0', '1',
                    '1', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '0', '1', '1', '1', '1', '1', '1'
                ],
                vec![
                    '1', '1', '1', '0', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0',
                    '1', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1',
                    '1', '1', '1', '1', '0', '1', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '0',
                    '1', '1', '1', '1', '1', '1', '0', '1', '0', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '0', '1', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '1', '0', '0', '0', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '0', '1', '1', '1', '0', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1', '1', '0', '0', '1',
                    '1', '1', '0', '1', '1', '0', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '0', '1', '1', '0', '1', '1', '1', '1', '1', '1', '0', '1',
                    '1', '0', '1', '1', '0', '1', '1', '1', '1', '1', '1', '0', '1', '1', '1', '1',
                    '1', '1', '1', '0', '1', '1', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1'
                ],
                vec![
                    '1', '1', '0', '0', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0',
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1', '1',
                    '1', '1', '1', '1', '1', '0', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1',
                    '1', '1', '1', '0', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1'
                ],
                vec![
                    '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '0', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1', '0', '1', '0', '1', '0', '1', '1', '0',
                    '1', '1', '1', '1', '1', '1', '1', '1'
                ],
                vec![
                    '1', '0', '1', '1', '0', '1', '1', '1', '1', '1', '1', '0', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '0', '0', '1', '1'
                ],
                vec![
                    '1', '0', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1',
                    '1', '0', '0', '1', '1', '1', '1', '1'
                ],
                vec![
                    '0', '1', '1', '1', '1', '0', '1', '1', '1', '1', '0', '1', '1', '1', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1'
                ],
                vec![
                    '0', '1', '1', '1', '1', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1',
                    '0', '1', '1', '1', '0', '1', '1', '1', '1', '0', '1', '1', '1', '0', '1', '1',
                    '1', '1', '1', '1', '1', '1', '1', '1'
                ],
                vec![
                    '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1', '0', '1',
                    '1', '1', '1', '0', '1', '1', '1', '1', '1', '1', '0', '1', '0', '1', '1', '0',
                    '0', '1', '1', '1', '1', '0', '1', '1'
                ],
                vec![
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1', '1',
                    '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '0', '1', '1', '1', '1', '1',
                    '1', '1', '1', '0', '1', '1', '1', '0'
                ],
                vec![
                    '1', '1', '1', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1', '0', '0',
                    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '1', '1', '1', '1',
                    '1', '1', '0', '0', '1', '1', '1', '1'
                ],
                vec![
                    '1', '1', '0', '1', '1', '0', '1', '1', '1', '1', '1', '1', '0', '1', '0', '1',
                    '1', '1', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '1', '0', '0', '1',
                    '1', '1', '0', '1', '0', '1', '0', '0'
                ],
                vec![
                    '0', '1', '1', '0', '1', '1', '1', '1', '1', '1', '1', '0', '0', '1', '1', '1',
                    '1', '1', '0', '0', '1', '0', '1', '1', '1', '1', '1', '0', '1', '1', '1', '0',
                    '1', '1', '0', '1', '1', '1', '0', '1'
                ]
            ])
        );
    }
}
